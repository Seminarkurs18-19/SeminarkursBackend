<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Einf端gen</title>
    <link href="stylesheets/stylesheet.css" rel="stylesheet">
    <script src="js/socket.js"></script>
</head>
<body>
<h1>Einf端gen Test</h1>
<select id="tabelle">
    <option value=""></option>
    <option value="Item_from_Artikel">Individueller Artikel(Item)</option>
    <option value="Artikel">Artikel</option>
    <option value="Comment_on_Item">Kommentar</option>
</select>
<br><br>
<div id="indi_Artikel_box" STYLE="visibility: hidden">
    ItemID:<input id="inputi_item_id" type="text"> ArtikelID:<input id="inputi_article_id" type="text">
</div>
<br>
<div id="Artikel_box" STYLE="visibility: hidden">
    ArtikelID:<input id="inputa_article_id" type="text"> Artikel Bezeichnung:<input id="input_article_bez" type="text">
    PDF-Link:<input id="input_pdf_link" type="text">
</div>
<br>
<div id="Kommentar_box" STYLE="visibility: hidden">
    KommentarID:<input id="input_comment_id" type="text"> Kommentar Bezeichnung:<input id="input_comment_bez"
                                                                                       type="text"> Kommentar:<input
        id="input_comment" type="text"> ItemID:<input id="inputc_item_id" type="text">
</div>
<br>
<div id="result"></div>
<br>
<button id="verarbeitung">Hinzuf端gen</button>
<a href="index.html">Zur端ck</a>
</body>
<script>
    //Verbindung herstellen
    var connection = io();
    //Daten GET

    connection.on('get_insert', (data) => {
        console.log("line:44" + data);
        document.getElementById('result').innerHTML = data;

    });

    //Daten EMIT
    let data = {};
    var insert_table = "";
    var insert_values = "";
    var insert_columns = "";

    var btn_go = document.getElementById("verarbeitung");
    var table = document.getElementById("tabelle");
    var div_indi_artikel = document.getElementById("indi_Artikel_box");
    var div_artikel = document.getElementById("Artikel_box");
    var div_kommentar = document.getElementById("Kommentar_box");

    var inputi_item_id = document.getElementById("inputi_item_id");
    var inputi_article_id = document.getElementById("inputi_article_id");

    var inputa_article_id = document.getElementById("inputa_article_id");
    var input_article_bez = document.getElementById("input_article_bez");
    var input_pdf_link = document.getElementById("input_pdf_link");

    var input_comment_id = document.getElementById("input_comment_id");
    var input_comment_bez = document.getElementById("input_comment_bez");
    var input_comment = document.getElementById("input_comment");
    var inputc_item_id = document.getElementById("inputc_item_id");

    btn_go.addEventListener("click", start);
    table.addEventListener("change", anderung);

    function anderung() {
        var new_value = table.value;
        //console.log(new_value);
        switch (new_value) {
            case "Item_from_Artikel":
                console.log(new_value);
                div_artikel.style.visibility = "hidden";
                div_indi_artikel.style.visibility = "visible";
                div_kommentar.style.visibility = "hidden";
                insert_columns = "ITEM_ID, ARTIKEL_ID";
                break;
            case "Artikel":
                console.log(new_value);
                div_artikel.style.visibility = "visible";
                div_indi_artikel.style.visibility = "hidden";
                div_kommentar.style.visibility = "hidden";
                insert_columns = "ARTIKEL_ID, Art_Bez, PDF_link";
                break;
            case "Comment_on_Item":
                console.log(new_value);
                div_artikel.style.visibility = "hidden";
                div_indi_artikel.style.visibility = "hidden";
                div_kommentar.style.visibility = "visible";
                insert_columns = "COMMENT_ID, Com_Bez,Comment, ITEM_ID";
                break;
            default:
                console.log("nix");
                div_artikel.style.visibility = "hidden";
                div_indi_artikel.style.visibility = "hidden";
                div_kommentar.style.visibility = "hidden";
                insert_columns = "";
        }
    }

    function start() {
        document.getElementById('result').innerHTML = "";
        console.log("klick");
        var new_table_value = table.value;
        console.log(new_table_value);
        insert_table = new_table_value;
        console.log(insert_table);
        console.log(insert_columns);
        switch (new_table_value) {
            case "Item_from_Artikel":
                insert_values = '"' + inputi_item_id.value + '", "' + inputi_article_id.value + '"';
                break;
            case "Artikel":
                insert_values = '"' + inputa_article_id.value + '", "' + input_article_bez.value + '", "' + input_pdf_link.value + '"';
                break;
            case "Comment_on_Item":
                insert_values = '"' + input_comment_id.value + '", "' + input_comment_bez.value + '", "' + input_comment.value + '", "' + inputc_item_id.value + '"';
                break;
            default:
                insert_values = "";
        }
        data = {insert_table, insert_columns, insert_values};

        console.log(data);
        connection.emit('insert', data);
    }
</script>
</html>