<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Einf端gen</title>
    <link href="stylesheets/stylesheet.css" rel="stylesheet">
    <script src="js/socket.js"></script>
</head>
<body>
<h1>Einf端gen Test</h1>
<select id="tabelle">
    <option value=""></option>
    <option value="Indi_Artikel">Individueller Artikel(Item)</option>
    <option value="Artikel">Artikel</option>
    <option value="Kommentar">Kommentar</option>
</select>
<br><br>
<div id="indi_Artikel_box" STYLE="visibility: hidden">
    ItemID:<input id="inputi_item_id" type="text"> ArtikelID:<input id="inputi_article_id" type="text">
</div>
<br>
<div id="Artikel_box" STYLE="visibility: hidden">
    ArtikelID:<input id="inputa_article_id" type="text"> Artikel Bezeichnung:<input id="input_article_bez" type="text">
    PDF-Link:<input id="input_pdf_link" type="text">
</div>
<br>
<div id="Kommentar_box" STYLE="visibility: hidden">
    KommentarID:<input id="input_comment_id" type="text"> Kommentar Bezeichnung:<input id="input_comment_bez"
                                                                                       type="text"> Kommentar:<input
        id="input_comment" type="text"> ItemID:<input id="inputc_item_id" type="text">
</div>
<br>
<button id="verarbeitung">Hinzuf端gen</button>
<a href="index.html">Zur端ck</a>
</body>
<script>
    //Verbindung herstellen
    var connection = io();
    //Daten GET

    connection.on('get_update', (data) => {
        console.log(data);

    });

    //Daten EMIT
    let data = '';
    var insert_table = "";
    var insert_values = "";
    var insert_columns = "";

    var btn_go = document.getElementById("verarbeitung");
    var table = document.getElementById("tabelle");
    var div_indi_artikel = document.getElementById("indi_Artikel_box");
    var div_artikel = document.getElementById("Artikel_box");
    var div_kommentar = document.getElementById("Kommentar_box");

    var inputi_item_id = document.getElementById("inputi_item_id");
    var inputi_article_id = document.getElementById("inputi_article_id");

    var inputa_article_id = document.getElementById("inputa_article_id");
    var input_article_bez = document.getElementById("input_article_bez");
    var input_pdf_link = document.getElementById("input_pdf_link");

    var input_comment_id = document.getElementById("input_comment_id");
    var input_comment_bez = document.getElementById("input_comment_bez");
    var input_comment = document.getElementById("input_comment");
    var inputc_item_id = document.getElementById("inputc_item_id");

    btn_go.addEventListener("click", start);
    table.addEventListener("change", anderung);

    function anderung() {
        var new_value = table.value;
        //console.log(new_value);
        switch (new_value) {
            case "Indi_Artikel":
                console.log(new_value);
                div_artikel.style.visibility = "hidden";
                div_indi_artikel.style.visibility = "visible";
                div_kommentar.style.visibility = "hidden";
                insert_columns = "insert_columns:{\n ITEM_ID,\n ARTIKEL_ID\n}";
                break;
            case "Artikel":
                console.log(new_value);
                div_artikel.style.visibility = "visible";
                div_indi_artikel.style.visibility = "hidden";
                div_kommentar.style.visibility = "hidden";
                insert_columns = "insert_columns:{\n ARTIKEL_ID,\n Art_Bez,\n PDF_link\n}";
                break;
            case "Kommentar":
                console.log(new_value);
                div_artikel.style.visibility = "hidden";
                div_indi_artikel.style.visibility = "hidden";
                div_kommentar.style.visibility = "visible";
                insert_columns = "insert_columns:{\n COMMENT_ID,\n Com_Bez,\n Comment,\n ITEM_ID\n}";
                break;
            default:
                console.log("nix");
                div_artikel.style.visibility = "hidden";
                div_indi_artikel.style.visibility = "hidden";
                div_kommentar.style.visibility = "hidden";
                insert_columns = "";
        }
    }

    function start() {
        console.log("klick");
        var new_table_value = table.value;
        console.log(new_table_value);
        insert_table = "insert_table:{\n " + new_table_value + "\n}";
        console.log(insert_table);
        console.log(insert_columns);
        switch (new_table_value) {
            case "Indi_Artikel":
                insert_values = "insert_values:{\n " + inputi_item_id.value + ",\n " + inputi_article_id.value + "\n}";
                break;
            case "Artikel":
                insert_values = "insert_values:{\n " + inputa_article_id.value + ",\n " + input_article_bez.value + ",\n " + input_pdf_link.value + "\n}";
                break;
            case "Kommentar":
                insert_values = "insert_values:{\n " + input_comment_id.value + ",\n " + input_comment_bez.value + ",\n " + input_comment.value + ",\n " + inputc_item_id.value + "\n}";
                break;
            default:
                insert_values = "";
        }
        data = "[ " + insert_table + "\n" + insert_columns + "\n" + insert_values + "]";

        console.log(data);
        connection.emit('insert', data);
    }
</script>
</html>